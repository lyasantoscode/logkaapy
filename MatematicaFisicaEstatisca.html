<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8">
  <style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Roboto', sans-serif;
  }
  
  body {
    background: #f7f9fa;
  }
  
  .nav-container {
    background-color: #ecf9fa;
    padding: 15px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  
  .logo {
    color: #02b3e5;
    font-size: 24px;
    font-weight: bold;
    text-decoration: none;
  }
  
  .nav-links {
    display: flex;
    align-items: center;
    gap: 30px;
  }
  
  .nav-link {
    color: #000;
    text-decoration: none;
    font-size: 16px;
  }
  
  .nav-link:hover {
    opacity: 0.8;
  }
  
  .container {
    padding: 20px;
    max-width: 1400px;
    margin: 20px auto 0;
  }
  
  .top-bar {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
  }
  
  .filter-button, .sort-button {
    padding: 10px 20px;
    background: white;
    border: 1px solid #d1d7dc;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 500;
  }
  
  .filter-menu {
    width: 250px;
    background: white;
    padding: 20px;
    border: 1px solid #d1d7dc;
    border-radius: 4px;
    margin-right: 20px;
    display: none;
  }
  
  .filter-menu.active {
    display: block;
  }
  
  .filter-section {
    margin-bottom: 20px;
  }
  
  .filter-section h3 {
    margin-bottom: 10px;
    color: #1c1d1f;
  }
  
  .filter-section ul {
    list-style: none;
  }
  
  .filter-section li {
    padding: 5px 0;
    cursor: pointer;
    transition: color 0.3s;
  }
  
  .filter-section li:hover {
    color: #5624d0;
  }
  
  .filter-section li.active {
    color: #5624d0;
    font-weight: bold;
  }
  
  .course-list {
    flex: 1;
  }
  
  .course-card {
    display: flex;
    padding: 20px;
    background: white;
    border: 1px solid #d1d7dc;
    margin-bottom: 30px;
    border-radius: 4px;
    justify-content: space-between;
    position: relative;
  }
  
  .course-card.hidden {
    display: none;
  }
  
  .course-image {
    width: 200px;
    height: 120px;
    background: #eee;
    margin-right: 20px;
    position: relative;
    overflow: hidden; 
  }
  
  .course-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .favorite-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 24px;
    color: #dc3545;
  }
  
  .course-info {
    flex: 1;
  }
  
  .course-info h2 {
    font-size: 18px;
    margin-bottom: 5px;
    color: #1c1d1f;
  }
  
  .course-subtitle {
    color: #6a6f73;
    margin-bottom: 10px;
  }
  
  .instructor {
    color: #6a6f73;
    margin-bottom: 5px;
  }
  
  .stats {
    display: flex;
    gap: 20px;
    color: #6a6f73;
    margin-bottom: 10px;
    align-items: center;
  }
  
  .rating {
    color: #b4690e;
    font-weight: bold;
  }
  
  .price-container {
    min-width: 120px;
    text-align: right;
    display: flex;
    align-items: center;
    justify-content: flex-end;
  }
  
  .price {
    font-weight: bold;
    font-size: 20px;
    color: #1c1d1f;
  }
  
  .content-wrapper {
    display: flex;
  }
  
  .sort-dropdown {
    position: relative;
    display: inline-block;
  }
  
  .sort-options {
    display: none;
    position: absolute;
    background: white;
    border: 1px solid #d1d7dc;
    border-radius: 4px;
    min-width: 200px;
    z-index: 1;
  }
  
  .sort-options.active {
    display: block;
  }
  
  .sort-option {
    padding: 10px 20px;
    cursor: pointer;
  }
  
  .sort-option:hover {
    background: #f7f9fa;
  }
  
  .tags {
    display: none;
  }
  
  .rating-count {
    color: #6a6f73;
    font-size: 14px;
  }
  
  .search-container {
    margin-bottom: 20px;
  }
  
  .search-wrapper {
    max-width: 600px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    background: white;
    border: 1px solid #d1d7dc;
    border-radius: 4px;
    overflow: hidden;
  }
  
  #search-input {
    flex: 1;
    padding: 12px 16px;
    border: none;
    outline: none;
    font-size: 16px;
    width: 100%;
  }
  
  .search-button {
    background: none;
    border: none;
    padding: 12px 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #6a6f73;
  }
  
  .search-button:hover {
    color: #1c1d1f;
  }
  
  .add-to-cart-btn {
    display: none;
    position: absolute;
    bottom: -20px;
    left: 50%;
    transform: translateX(-50%);
    background: #5624d0;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    z-index: 2;
    transition: all 0.7s;
  }
  
  .add-to-cart-btn:hover {
    background: #401b9c;
  }
  
  .course-card.favorited .add-to-cart-btn {
    display: none;
  }
  
  #cart-icon {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #5624d0;
    color: white;
    padding: 15px;
    border-radius: 50%;
    cursor: pointer;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .cart-count {
    position: absolute;
    top: -8px;
    right: -8px;
    background: #dc3545;
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    font-size: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  @keyframes scaleDown {
    from {
      transform: scale(1);
      opacity: 1;
    }
    to {
      transform: scale(0.2);
      opacity: 0.7;
    }
  }
  
  @keyframes moveToCart {
    to {
      top: var(--final-top);
      left: var(--final-left);
      width: 30px;
      height: 30px;
      opacity: 0;
    }
  }
  
  .flying-img {
    position: fixed;
    z-index: 9999;
    width: 200px;
    height: 120px;
    object-fit: cover;
    pointer-events: none;
    transform-origin: top left;
    transition: all 1.5s cubic-bezier(0.075, 0.82, 0.165, 1);
    opacity: 1.9;
  }
  
  @keyframes slideIn {
    from {
      transform: translate(-50%, 20px);
      opacity: 0;
    }
    to {
      transform: translate(-50%, 0);
      opacity: 1;
    }
  }
  
  .page-title {
    text-align: center;
    margin: 40px 0 10px;
    color: #1c1d1f;
    font-size: 32px;
    font-weight: bold;
  }
  
  .page-subtitle {
    text-align: center;
    color: #6a6f73;
    font-size: 18px;
    margin-bottom: 40px;
  }
  
  /* Add after existing cart styles */
  .cart-dropdown {
    display: none;
    position: fixed;
    bottom: 80px;
    right: 20px;
    width: 320px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    padding: 16px;
    z-index: 999;
  }
  
  #cart-icon:hover .cart-dropdown {
    display: block;
  }
  
  .cart-item {
    display: flex;
    padding: 10px 0;
    border-bottom: 1px solid #eee;
    align-items: center;
    gap: 12px;
  }
  
  .cart-item:last-child {
    border-bottom: none;
  }
  
  .cart-item-img {
    width: 60px;
    height: 40px;
    object-fit: cover;
    border-radius: 4px;
  }
  
  .cart-item-info {
    flex: 1;
  }
  
  .cart-item-title {
    font-size: 14px;
    font-weight: 500;
    color: #1c1d1f;
    margin-bottom: 4px;
  }
  
  .cart-item-price {
    font-size: 14px;
    color: #1c1d1f;
    font-weight: bold;
  }
  
  .cart-total {
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid #eee;
    display: flex;
    justify-content: space-between;
    font-weight: bold;
    font-size: 16px;
    color: #1c1d1f;
  }
  
  .cart-total hr {
  width: 100%;
  border: none;
  border-top: 1px solid #ddd;
  margin: 8px 0;
}
  

  .empty-cart {
    text-align: center;
    color: #6a6f73;
    padding: 20px 0;
  }
  
  .checkout-btn {
    display: block;
    width: 100%;
    padding: 12px;
    background: #5624d0;
    color: white;
    border: none;
    border-radius: 4px;
    margin-top: 12px;
    cursor: pointer;
    text-align: center;
    text-decoration: none;
  }
  
  .checkout-btn:hover {
    background: #401b9c;
  }
  </style>
  </head>
  <body>
  <div class="nav-container">
    <a href="TelaPrincipal.html" class="logo">Kaapy</a>
    <div class="nav-links">
      <a href="https://example.com/como-funciona" class="nav-link">Como Funciona</a>
      <a href="AcesseConta.html" class="nav-link">Entrar</a> 
      <a href="Cadastre-se.html" class="nav-link">Cadastrar-se</a>
    </div>
  </div>
  <div class="page-title">Cursos de Matem&#xe1;tica e F&#xed;sica</div>
  <div class="page-subtitle">Cursos para voc&#xea; come&#xe7;ar sua jornada de aprendizado</div>
  <div id="cart-icon">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="9" cy="21" r="1"/>
      <circle cx="20" cy="21" r="1"/>
      <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
    </svg>
    <span class="cart-count" data-product-count="0">0</span>

    <div class="cart-dropdown">

      <div id="cart-items">
        <div class="empty-cart">Seu carrinho est&#xe1; vazio</div>
      </div>
      <div class="cart-total">
       
        <span>Total:</span>
        <span id="cart-total">R&#x24; 0,00</span>
      </div>
     <a href="/logkaapy/carrinho.html"" class="checkout-btn">Ir para o carrinho</a>

   
   
    </div>
  </div>
  <div class="container">
    <div class="search-container">
      <div class="search-wrapper">
        <input type="text" id="search-input" placeholder="Buscar cursos...">
        <button class="search-button">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"/>
            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
          </svg>
        </button>
      </div>
    </div>
    <div class="top-bar">
      <button class="filter-button">Filtro</button>
      <div class="sort-dropdown">
        <button class="sort-button">Classificar por</button>
        <div class="sort-options">
          <div class="sort-option" data-sort="all">Todos</div>
          <div class="sort-option" data-sort="most-rated">Mais Avaliados</div>
          <div class="sort-option" data-sort="highest-rated">Classifica&#xe7;&#xe3;o mais alta</div>
          <div class="sort-option" data-sort="newest">Mais Novo</div>
        </div>
      </div>
    </div>
    
    <div class="content-wrapper">
      <div class="filter-menu">
        <div class="filter-section">
          <h3>Matem&#xe1;tica</h3>
          <ul>
          <!--<li data-filter="algebra">&#x1f522;lgebra</li>-->  
           <li data-filter="algebra">Algebra</li>
            <li data-filter="geometria">Geometria</li>
            <li data-filter="calculo">C&#xe1;lculo</li>
          </ul>
        </div>
        
        <div class="filter-section">
          <h3>F&#xed;sica</h3>
          <ul>
            <li data-filter="mecanica">Mec&#xe2;nica</li>
            <li data-filter="eletricidade">Eletricidade</li>
            <li data-filter="termodinamica">Termodin&#xe2;mica</li>
          </ul>
        </div>
        
        <div class="filter-section">
          <h3>Estat&#xed;stica</h3>
          <ul>
            <li data-filter="probabilidade">Probabilidade</li>
            <li data-filter="estatistica">Estat&#xed;stica</li>
          </ul>
        </div>
        
        <div class="filter-section">
          <h3>Favoritos</h3>
          <ul>
            <li data-filter="favoritos">Cursos Favoritos</li>
          </ul>
        </div>
      </div>
  
      <div class="course-list">
        <div class="course-card" data-categories="fisica eletricidade" data-rating="4.8" data-reviews="1543" data-date="2023-08-01">
          <div class="course-image">
            <img src="imagem1.jpg" alt="Eletromagnetismo Fundamental">
            <button class="favorite-btn">&#x2661;</button>
          </div>
          <div class="course-info">
            <h2>Eletromagnetismo Fundamental</h2>
            <div class="course-subtitle">Teoria e Exerc&#xed;cios Pr&#xe1;ticos</div>
            <div class="instructor">Prof. Vinicius Batista Santos</div>
            <div class="stats">
              <span class="rating">&#x2605;&#x2605;&#x2605;&#x2605;&#x2605; 4.8</span>
              <span class="rating-count">(1543 avalia&#xe7;&#xf5;es)</span>
              <span>25 horas</span>
              <span>78 aulas</span>
            </div>
          </div>
          <div class="price-container">
            <div class="price">R&#x24; 199,90</div>
          </div>
          <button class="add-to-cart-btn">Adicionar ao Carrinho</button>
        </div>
  
        <div class="course-card" data-categories="fisica mecanica algebra" data-rating="4.8" data-reviews="980" data-date="2023-07-15">
          <div class="course-image">
            <button class="favorite-btn">&#x2661;</button>
          </div>
          <div class="course-info">
            <h2>Curso de F&#xed;sica - Matem&#xe1;tica Aplicada</h2>
            <div class="course-subtitle">Fundamentos e Aplica&#xe7;&#xf5;es Pr&#xe1;ticas</div>
            <div class="instructor">Por Jo&#xe3;o Silva</div>
            <div class="stats">
              <span class="rating">&#x2605;&#x2605;&#x2605;&#x2605;&#x2605; 4.8</span>
              <span class="rating-count">(980 avalia&#xe7;&#xf5;es)</span>
              <span>32 horas</span>
              <span>124 aulas</span>
            </div>
          </div>
          <div class="price-container">
            <div class="price">R&#x24; 189,90</div>
          </div>
          <button class="add-to-cart-btn">Adicionar ao Carrinho</button>
        </div>
  
        <div class="course-card" data-categories="estatistica probabilidade" data-rating="4.5" data-reviews="760" data-date="2023-06-20">
          <div class="course-image">
            <button class="favorite-btn">&#x2661;</button>
          </div>
          <div class="course-info">
            <h2>Estat&#xed;stica para An&#xe1;lise de Dados</h2>
            <div class="course-subtitle">Teoria e Exerc&#xed;cios Pr&#xe1;ticos</div>
            <div class="instructor">Por Maria Santos</div>
            <div class="stats">
              <span class="rating">&#x2605;&#x2605;&#x2605;&#x2605;&#x2606; 4.5</span>
              <span class="rating-count">(760 avalia&#xe7;&#xf5;es)</span>
              <span>28 horas</span>
              <span>98 aulas</span>
            </div>
          </div>
          <div class="price-container">
            <div class="price">R&#x24; 199,90</div>
          </div>
          <button class="add-to-cart-btn">Adicionar ao Carrinho</button>
        </div>
  
        <div class="course-card" data-categories="calculo matematica" data-rating="4.9" data-reviews="1200" data-date="2023-08-10">
          <div class="course-image">
            <button class="favorite-btn">&#x2661;</button>
          </div>
          <div class="course-info">
            <h2>C&#xe1;lculo Diferencial e Integral</h2>
            <div class="course-subtitle">Fundamentos e Aplica&#xe7;&#xf5;es Pr&#xe1;ticas</div>
            <div class="instructor">Por Dr. Pedro Costa</div>
            <div class="stats">
              <span class="rating">&#x2605;&#x2605;&#x2605;&#x2605;&#x2605; 4.9</span>
              <span class="rating-count">(1200 avalia&#xe7;&#xf5;es)</span>
              <span>40 horas</span>
              <span>150 aulas</span>
            </div>
          </div>
          <div class="price-container">
            <div class="price">R&#x24; 249,90</div>
          </div>
          <button class="add-to-cart-btn">Adicionar ao Carrinho</button>
        </div>
        
        <div class="course-card" data-categories="algebra matematica" data-rating="4.6" data-reviews="756" data-date="2023-07-25">
          <div class="course-image">
            <button class="favorite-btn">&#x2661;</button>
          </div>
          <div class="course-info">
            <h2>Teoria dos N&#xfa;meros</h2>
            <div class="course-subtitle">Fundamentos da Matem&#xe1;tica Discreta</div>
            <div class="instructor">Prof. Cledenilson Martins Bulc&#xe3;o</div>
            <div class="stats">
              <span class="rating">&#x2605;&#x2605;&#x2605;&#x2605;&#x2606; 4.6</span>
              <span class="rating-count">(756 avalia&#xe7;&#xf5;es)</span>
              <span>20 horas</span>
              <span>65 aulas</span>
            </div>
          </div>
          <div class="price-container">
            <div class="price">R&#x24; 189,90</div>
          </div>
          <button class="add-to-cart-btn">Adicionar ao Carrinho</button>
        </div>
  
        <div class="course-card" data-categories="geometria matematica" data-rating="4.7" data-reviews="892" data-date="2023-07-20">
          <div class="course-image">
            <button class="favorite-btn">&#x2661;</button>
          </div>
          <div class="course-info">
            <h2>Geometria Espacial Avan&#xe7;ada</h2>
            <div class="course-subtitle">Teoremas e Aplica&#xe7;&#xf5;es 3D</div>
            <div class="instructor">Prof. Cledenilson Andrade Silva</div>
            <div class="stats">
              <span class="rating">&#x2605;&#x2605;&#x2605;&#x2605;&#x2606; 4.7</span>
              <span class="rating-count">(892 avalia&#xe7;&#xf5;es)</span>
              <span>22 horas</span>
              <span>70 aulas</span>
            </div>
          </div>
          <div class="price-container">
            <div class="price">R&#x24; 199,90</div>
          </div>
          <button class="add-to-cart-btn">Adicionar ao Carrinho</button>
        </div>
  
        <div class="course-card" data-categories="fisica mecanica" data-rating="4.9" data-reviews="1256" data-date="2023-08-05">
          <div class="course-image">
            <button class="favorite-btn">&#x2661;</button>
          </div>
          <div class="course-info">
            <h2>F&#xed;sica Moderna</h2>
            <div class="course-subtitle">Relatividade e F&#xed;sica Qu&#xe2;ntica</div>
            <div class="instructor">Prof. Daniel Andrade Bulc&#xe3;o</div>
            <div class="stats">
              <span class="rating">&#x2605;&#x2605;&#x2605;&#x2605;&#x2605; 4.9</span>
              <span class="rating-count">(1256 avalia&#xe7;&#xf5;es)</span>
              <span>28 horas</span>
              <span>85 aulas</span>
            </div>
          </div>
          <div class="price-container">
            <div class="price">R&#x24; 229,90</div>
          </div>
          <button class="add-to-cart-btn">Adicionar ao Carrinho</button>
        </div>
  
        <div class="course-card" data-categories="fisica termodinamica" data-rating="4.9" data-reviews="2134" data-date="2023-08-15">
          <div class="course-image">
            <button class="favorite-btn">&#x2661;</button>
          </div>
          <div class="course-info">
            <h2>Termodin&#xe2;mica Aplicada</h2>
            <div class="course-subtitle">Leis e Aplica&#xe7;&#xf5;es Pr&#xe1;ticas</div>
            <div class="instructor">Profa. Marcos Lima Botafogo</div>
            <div class="stats">
              <span class="rating">&#x2605;&#x2605;&#x2605;&#x2605;&#x2605; 4.9</span>
              <span class="rating-count">(2134 avalia&#xe7;&#xf5;es)</span>
              <span>24 horas</span>
              <span>72 aulas</span>
            </div>
          </div>
          <div class="price-container">
            <div class="price">R&#x24; 209,90</div>
          </div>
          <button class="add-to-cart-btn">Adicionar ao Carrinho</button>
        </div>
  
        <div class="course-card" data-categories="probabilidade estatistica" data-rating="4.8" data-reviews="3421" data-date="2023-08-12">
          <div class="course-image">
            <button class="favorite-btn">&#x2661;</button>
          </div>
          <div class="course-info">
            <h2>Probabilidade Aplicada</h2>
            <div class="course-subtitle">Introdu&#xe7;&#xe3;o &#xe0; Probabilidade</div>
            <div class="instructor">Prof. Cledenilson Coelho de Souza</div>
            <div class="stats">
              <span class="rating">&#x2605;&#x2605;&#x2605;&#x2605;&#x2605; 4.8</span>
              <span class="rating-count">(3421 avalia&#xe7;&#xf5;es)</span>
              <span>20 horas</span>
              <span>65 aulas</span>
            </div>
          </div>
          <div class="price-container">
            <div class="price">R&#x24; 179,90</div>
          </div>
          <button class="add-to-cart-btn">Adicionar ao Carrinho</button>
        </div>
  
        <div class="course-card" data-categories="estatistica" data-rating="4.9" data-reviews="1756" data-date="2023-08-08">
          <div class="course-image">
            <button class="favorite-btn">&#x2661;</button>
          </div>
          <div class="course-info">
            <h2>Estat&#xed;stica Avan&#xe7;ada</h2>
            <div class="course-subtitle">An&#xe1;lise de Dados Avan&#xe7;ada</div>
            <div class="instructor">Prof. Cledenilson Lima Andrade</div>
            <div class="stats">
              <span class="rating">&#x2605;&#x2605;&#x2605;&#x2605;&#x2605; 4.9</span>
              <span class="rating-count">(1756 avalia&#xe7;&#xf5;es)</span>
              <span>25 horas</span>
              <span>80 aulas</span>
            </div>
          </div>
          <div class="price-container">
            <div class="price">R&#x24; 219,90</div>
          </div>
          <button class="add-to-cart-btn">Adicionar ao Carrinho</button>
        </div>
      </div>
    </div>
  </div>
  
  <script>
  
  document.querySelector('.filter-button').addEventListener('click', function () {
    document.querySelector('.filter-menu').classList.toggle('active');
  });
  document.querySelector('.sort-button').addEventListener('click', function () {
    document.querySelector('.sort-options').classList.toggle('active');
  });
  const filterItems = document.querySelectorAll('.filter-section li');
  filterItems.forEach(item => {
    item.addEventListener('click', function () {
      const filter = this.getAttribute('data-filter');
      const cards = document.querySelectorAll('.course-card');
      filterItems.forEach(fi => fi.classList.remove('active'));
      this.classList.add('active');
      if (filter === 'favoritos') {
        cards.forEach(card => {
          const favoriteBtn = card.querySelector('.favorite-btn');
          const isFavorite = favoriteBtn.textContent === '♥';
          card.classList.toggle('hidden', !isFavorite);
          const addToCartBtn = card.querySelector('.add-to-cart-btn');
          if (addToCartBtn) {
            addToCartBtn.style.display = isFavorite ? 'block' : 'none';
          }
        });
      } else {
        cards.forEach(card => {
          const categories = card.getAttribute('data-categories').split(' ');
          card.classList.toggle('hidden', !categories.includes(filter));
          const addToCartBtn = card.querySelector('.add-to-cart-btn');
          if (addToCartBtn) {
            addToCartBtn.style.display = 'none';
          }
        });
      }
    });
  });
  const favoriteButtons = document.querySelectorAll('.favorite-btn');
  favoriteButtons.forEach(btn => {
    btn.addEventListener('click', function () {
      const isFavorite = this.textContent === '♡';
      this.textContent = isFavorite ? '♥' : '♡';
      const card = this.closest('.course-card');
      card.classList.toggle('favorited', isFavorite);
      const addToCartBtn = card.querySelector('.add-to-cart-btn');
      const isInFavorites = document.querySelector('.filter-section li[data-filter="favoritos"]').classList.contains('active');
      if (addToCartBtn) {
        addToCartBtn.style.display = isFavorite && isInFavorites ? 'block' : 'none';
      }
    });
  });
  window.addEventListener('click', function (e) {
    if (!e.target.matches('.sort-button')) {
      const dropdown = document.querySelector('.sort-options');
      if (dropdown.classList.contains('active')) {
        dropdown.classList.remove('active');
      }
    }
    if (!e.target.matches('.filter-button')) {
      const filterMenu = document.querySelector('.filter-menu');
      if (filterMenu.classList.contains('active') && !filterMenu.contains(e.target)) {
        filterMenu.classList.remove('active');
      }
    }
  });
  document.querySelectorAll('.sort-option').forEach(option => {
    option.addEventListener('click', function () {
      const sortType = this.getAttribute('data-sort');
      const cards = Array.from(document.querySelectorAll('.course-card'));
      if (sortType === 'all') {
        cards.forEach(card => card.classList.remove('hidden'));
        document.querySelectorAll('.filter-section li').forEach(item => {
          item.classList.remove('active');
        });
      }
      switch (sortType) {
        case 'most-rated':
          cards.sort((a, b) => {
            return parseInt(b.getAttribute('data-reviews')) - parseInt(a.getAttribute('data-reviews'));
          });
          break;
        case 'highest-rated':
          cards.sort((a, b) => {
            return parseFloat(b.getAttribute('data-rating')) - parseFloat(a.getAttribute('data-rating'));
          });
          break;
        case 'newest':
          cards.sort((a, b) => {
            return new Date(b.getAttribute('data-date')) - new Date(a.getAttribute('data-date'));
          });
          break;
        case 'all':
          cards.sort((a, b) => {
            return Array.from(document.querySelectorAll('.course-card')).indexOf(a) - Array.from(document.querySelectorAll('.course-card')).indexOf(b);
          });
          break;
      }
      const courseList = document.querySelector('.course-list');
      cards.forEach(card => courseList.appendChild(card));
      document.querySelector('.sort-options').classList.remove('active');
    });
  });
  const searchInput = document.getElementById('search-input');
  const searchButton = document.querySelector('.search-button');
  function performSearch() {
    const searchTerm = searchInput.value.toLowerCase().trim();
    const cards = document.querySelectorAll('.course-card');
    cards.forEach(card => {
      const title = card.querySelector('h2').textContent.toLowerCase();
      const subtitle = card.querySelector('.course-subtitle').textContent.toLowerCase();
      const instructor = card.querySelector('.instructor').textContent.toLowerCase();
      const matchesSearch = title.includes(searchTerm) || subtitle.includes(searchTerm) || instructor.includes(searchTerm);
      card.classList.toggle('hidden', !matchesSearch);
    });
  }
  searchInput.addEventListener('input', performSearch);
  searchButton.addEventListener('click', performSearch);
  searchInput.addEventListener('keypress', function (e) {
    if (e.key === 'Enter') {
      performSearch();
    }
  });


  // Função para criar a animação de "voar para o carrinho"

  function createFlyingImage(courseCard) {
    const courseImage = courseCard.querySelector('.course-image img');
    const cartIcon = document.getElementById('cart-icon');


        
    // Selecione os elementos do ícone do carrinho e o dropdown

    // Selecione os elementos do ícone do carrinho e o dropdown

const cartDropdown = document.querySelector('.cart-dropdown');

// Variável para controlar o estado do dropdown
let isDropdownVisible = false;

// Função para exibir o dropdown
function showDropdown() {
  isDropdownVisible = true;
  cartDropdown.style.display = 'block';
}

// Função para ocultar o dropdown
function hideDropdown() {
  isDropdownVisible = false;
  setTimeout(() => {
    // Apenas oculta se o mouse não voltou ao dropdown ou ao ícone
    if (!isDropdownVisible) {
      cartDropdown.style.display = 'none';
    }
  }, 200); // Adiciona um pequeno atraso para evitar saídas rápidas
}

// Adicione os eventos de mouse
cartIcon.addEventListener('mouseenter', showDropdown);
cartDropdown.addEventListener('mouseenter', showDropdown);
cartIcon.addEventListener('mouseleave', hideDropdown);
cartDropdown.addEventListener('mouseleave', hideDropdown);




   // if (!courseImage || !cartIcon) return;

     // Cria a imagem "voadora"
    const flying = document.createElement('img');
    flying.className = 'flying-img';
    flying.src = courseImage ? courseImage.src : ''; //culpado esse cara, nao remover NUNCA


     // Pega a posição inicial e final
   const start = courseImage ? courseImage.getBoundingClientRect() : courseCard.querySelector('.course-image').getBoundingClientRect();
   const end = cartIcon.getBoundingClientRect(); //NAO REMOVER NUNCA


     // Define os estilos iniciais

    flying.style.top = start.top + 'px';
    flying.style.left = start.left + 'px';

    document.body.appendChild(flying);
    requestAnimationFrame(() => {
      flying.style.setProperty('--final-top', `${end.top}px`);
      flying.style.setProperty('--final-left', `${end.left}px`);
      flying.style.animation = 'scaleDown .2s ease-in-out, moveToCart .8s .2s cubic-bezier(0.075, 0.82, 0.165, 1)';

// Remove a imagem após a animação e atualiza o contador
      flying.addEventListener('animationend', e => {
        if (e.animationName === 'moveToCart') {
          flying.remove();
          const cartCount = document.querySelector('.cart-count');
          const currentCount = parseInt(cartCount.getAttribute('data-product-count'));
          cartCount.setAttribute('data-product-count', currentCount + 1);
          cartCount.textContent = currentCount + 1;
          cartIcon.style.transform = 'scale(1.2)';
          const title = courseCard.querySelector('h2').textContent;
          const price = parseFloat(courseCard.querySelector('.price').textContent.replace('R$ ', '').replace(',', '.'));
          const image = courseImage ? courseImage.src : '';
          cartItems.push({
            title,
            price,
            image
          });
          cartTotal += price;
          updateCartDropdown();
          setTimeout(() => {
            cartIcon.style.transform = 'scale(1)';
          }, 200);
        }
      });
    });
  }
  document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
    btn.addEventListener('click', function (e) {
      e.preventDefault();
      const courseCard = this.closest('.course-card');
      createFlyingImage(courseCard);
    });
  });
  
  
  let cartItems = [];
  let cartTotal = 0;
  
  function updateCartDropdown() {
    const cartItemsContainer = document.getElementById('cart-items');
    const cartTotalElement = document.getElementById('cart-total');
    if (cartItems.length === 0) {
      cartItemsContainer.innerHTML = '<div class="empty-cart">Seu carrinho está vazio</div>';
      cartTotalElement.textContent = 'R$ 0,00';
      return;
    }
    
    cartItemsContainer.innerHTML = cartItems.map(item => `
      <div class="cart-item">
        <img src="${item.image}" alt="${item.title}" class="cart-item-img">
        <div class="cart-item-info">
          <div class="cart-item-title">${item.title}</div>
            <div class="cart-item-price">R$ ${item.price.toFixed(2).replace('.', ',')}</div>
        </div>
      </div>
    `).join('');
    cartTotalElement.textContent = `R$ ${cartTotal.toFixed(2).replace('.', ',')}`;
  }

  </script>

  <!-- Novo script do Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
    import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyD2I1j-tEHNX8692BVMnTahFlzQZ9sKJHM",
      authDomain: "kaapyacademy.firebaseapp.com",
      projectId: "kaapyacademy",
      storageBucket: "kaapyacademy.appspot.com",
      messagingSenderId: "598458944673",
      appId: "1:598458944673:web:f67dc2396629f322abf4e0",
      databaseURL: "https://kaapyacademy-default-rtdb.firebaseio.com/"
    };

    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);

    // Função para salvar um curso no Firebase
    function saveToCart(course) {
  const cartRef = ref(database, 'cart'); // Referência ao nó do carrinho
  push(cartRef, course)
    .then(() => {
      console.log('Curso adicionado ao carrinho com sucesso!'); // Substituir o alert por um console.log (opcional)
    })
    .catch((error) => {
      console.error('Erro ao salvar no Firebase:', error);
    });
}


    // Botão "Adicionar ao Carrinho"
    document.querySelectorAll('.add-to-cart-btn').forEach(button => {
      button.addEventListener('click', function () {
        const courseCard = this.closest('.course-card');
        const course = {
          title: courseCard.querySelector('h2').textContent,
          price: parseFloat(courseCard.querySelector('.price').textContent.replace('R$ ', '').replace(',', '.')),
          image: courseCard.querySelector('.course-image img')?.src || ''
        };

        saveToCart(course);
      });
    });
  </script>


  </body></html>
